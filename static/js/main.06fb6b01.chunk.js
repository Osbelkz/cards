(this.webpackJsonpcards=this.webpackJsonpcards||[]).push([[0],{13:function(e,t,r){e.exports={register:"Register_register__38-aa",register__container:"Register_register__container__3LldD",register__form:"Register_register__form__1BUgI",register__title:"Register_register__title__3UYHq",register__inputs:"Register_register__inputs__39dwI",register__buttons:"Register_register__buttons__R6uT6",register__error:"Register_register__error__2RoUn",register__loading:"Register_register__loading__24EIz"}},19:function(e,t,r){e.exports={profile:"Profile_profile__1-5kW",profile__container:"Profile_profile__container__32E_8",profile__title:"Profile_profile__title__184h-",profile__info:"Profile_profile__info__205Db",profile__buttons:"Profile_profile__buttons__ZYrOS"}},20:function(e,t,r){e.exports={login:"Login_login__2uauU",loading:"Login_loading__DRcVj",checkbox:"Login_checkbox__22VNC",infoTextRed:"Login_infoTextRed__3D3K3"}},21:function(e,t,r){e.exports={input:"Input_input__2b9yi",input__label:"Input_input__label__1lDak",input__elem:"Input_input__elem__2Zzrh",input__error:"Input_input__error__2PMc0",inputs__error_text:"Input_inputs__error_text__3FrbP"}},22:function(e,t,r){e.exports={restore:"Restore_restore__13Bjf",infoTextGreen:"Restore_infoTextGreen__2G6FJ",infoTextRed:"Restore_infoTextRed__28a17",loading:"Restore_loading__3_QQo"}},23:function(e,t,r){e.exports={newPassword:"NewPassword_newPassword__CQJI_",infoTextRed:"NewPassword_infoTextRed__2ZvXx",infoTextGreen:"NewPassword_infoTextGreen__3C5qD",loading:"NewPassword_loading__tsGzL"}},31:function(e,t,r){e.exports={navItem:"NavItem_navItem__3DieS",active:"NavItem_active___rzAL"}},35:function(e,t,r){e.exports={button:"Button_button__ir3Eb",green:"Button_green__3fh93",red:"Button_red__1bozl"}},47:function(e,t,r){e.exports={header:"Header_header__3zo7u"}},48:function(e,t,r){e.exports={routes:"Nav_routes__NLzDx"}},49:function(e,t,r){e.exports={main:"Main_main__2rISc"}},55:function(e,t,r){e.exports=r(85)},60:function(e,t,r){},61:function(e,t,r){},85:function(e,t,r){"use strict";r.r(t);var a,n=r(0),o=r.n(n),s=r(25),i=r.n(s),l=(r(60),r(61),r(47)),c=r.n(l),u=r(9),d=r(31),m=r.n(d),p=function(e){var t=e.path,r=e.title;return o.a.createElement(u.b,{to:t,className:m.a.navItem,activeClassName:m.a.active},r)},_=r(48),E=r.n(_),f=function(){return o.a.createElement("nav",{className:E.a.routes},o.a.createElement(p,{path:"/profile",title:"Profile"}),o.a.createElement(p,{path:"/login",title:"Login"}),o.a.createElement(p,{path:"/register",title:"Registration"}),o.a.createElement(p,{path:"/restore",title:"Restore password"}),o.a.createElement(p,{path:"/newPassword",title:"New password"}))},g=function(){return o.a.createElement("div",{className:c.a.header},o.a.createElement(f,null))},b=r(49),w=r.n(b),S=r(3),h=r(19),v=r.n(h),T=r(29),O=r(35),R=r.n(O),P=o.a.memo((function(e){var t=e.btnType,r=e.btnName,a=Object(T.a)(e,["btnType","btnName"]),n="".concat(R.a.button," ").concat(R.a[t]);return o.a.createElement("button",Object.assign({className:n},a),r)})),N=function(e){var t=e.userData,r=e.logout;return o.a.createElement("div",{className:v.a.profile},o.a.createElement("div",{className:v.a.profile__container},o.a.createElement("div",{className:v.a.profile__title},o.a.createElement("h3",null,"Profile page")),o.a.createElement("div",{className:v.a.profile__info},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Id:"),o.a.createElement("td",null,t._id)),o.a.createElement("tr",null,o.a.createElement("th",null,"Username:"),o.a.createElement("td",null,t.name)),o.a.createElement("tr",null,o.a.createElement("th",null,"Email:"),o.a.createElement("td",null,t.email)),o.a.createElement("tr",null,o.a.createElement("th",null,"Added:"),o.a.createElement("td",null,t.created)),o.a.createElement("tr",null,o.a.createElement("th",null,"Packs of cards:"),o.a.createElement("td",null,t.publicCardPacksCount))))),o.a.createElement("div",{className:v.a.profile__buttons},o.a.createElement(P,{onClick:r,btnName:"Logout",btnType:"red"}))))},L=r(1),j=r(11),x=r.n(j),A=r(17),y=r(2),k=r(51),I=r.n(k).a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),C=function(){return I.post("/auth/me")},U=function(e){return I.post("/auth/login",e)},D=function(){return I.delete("/auth/me")},F=function(e){return I.post("/auth/set-new-password",e)},V=function(e){return I.post("/auth/register",e)},G=function(e){return I.post("/auth/forgot",e)};!function(e){e.SET_USER="Profile/SET_USER"}(a||(a={}));var q,Z={userData:null},M=function(e){return{type:a.SET_USER,payload:{userData:e}}},z={isLoading:!1,isLoggedSuccess:!1,error:""},B=function(e){return{type:"login/SET-VALUE-IS-LOADING",isLoading:e}},W=function(e){return{type:"login/SET-VALUE-IS-LOGGED-SUCCESS",isLoggedSuccess:e}},X=function(e){return{type:"login/SET-ERROR-TEXT",error:e}};!function(e){e.SET_APP_ERROR="App/SET_APP_ERROR",e.SET_INIT_APP="App/SET_INIT_APP"}(q||(q={}));var $,J={error:"",initApp:"idle"},Q=function(e){return{type:q.SET_APP_ERROR,payload:{error:e}}},K=function(e){return{type:q.SET_INIT_APP,payload:{initApp:e}}},H=function(){var e=Object(L.b)(),t=Object(L.c)((function(e){return e.profile.userData})),r=Object(L.c)((function(e){return e.app.initApp})),a=Object(L.c)((function(e){return e.login.isLoggedSuccess}));Object(n.useEffect)((function(){"idle"!==r||a||e(function(){var e=Object(A.a)(x.a.mark((function e(t,r){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(K("succeeded")),t(Q("")),"loading"===r().app.initApp&&console.log("loading"),e.prev=3,e.next=6,C();case 6:a=e.sent,t(M(a.data)),t(W(!0)),t(K("succeeded")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),t(Q(e.t0.response?e.t0.response.data.error:"unknown error")),t(K("failed"));case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,r){return e.apply(this,arguments)}}())}),[r,a]);return t&&a?o.a.createElement(N,{userData:t,logout:function(){e(function(){var e=Object(A.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(K("loading")),t(Q(""));try{D(),t(M(null)),t(W(!1))}catch(r){t(X(r.response?r.response.data.error:"unknown error"))}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}):o.a.createElement(S.a,{to:"/login"})},Y=r(20),ee=r.n(Y),te=r(21),re=r.n(te),ae=o.a.memo((function(e){var t=e.label,r=e.errorCondition,a=e.errorText,n=Object(T.a)(e,["label","errorCondition","errorText"]);return o.a.createElement("div",{className:re.a.input},o.a.createElement("p",{className:re.a.input__label},t),o.a.createElement("input",Object.assign({className:"".concat(re.a.input__elem," ").concat(r?re.a.input__error:"")},n)),r?o.a.createElement("div",{className:re.a.inputs__error_text},a):null)})),ne=r(14),oe=o.a.memo((function(e){var t=Object(ne.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Field is required!",e.password?e.password.length<8&&(t.password="Too short password, min 8 symbols"):t.password="Field is required!",t},onSubmit:function(t){e.handleOnSubmit(t.email,t.password,t.rememberMe)}});return o.a.createElement("div",{className:ee.a.login},o.a.createElement("form",{onSubmit:t.handleSubmit},o.a.createElement("h3",null,"Login page"),o.a.createElement(ae,Object.assign({label:"Email",placeholder:"Please, put your email",errorCondition:!!t.errors.email&&t.touched.email,errorText:t.errors.email},t.getFieldProps("email"))),o.a.createElement(ae,Object.assign({label:"Password",placeholder:"Please, put your password",errorCondition:!!t.errors.password&&t.touched.password,errorText:t.errors.password},t.getFieldProps("password"))),o.a.createElement(ae,Object.assign({className:ee.a.checkbox,label:"remember me",type:"checkbox",checked:t.values.rememberMe},t.getFieldProps("rememberMe"))),o.a.createElement("div",{className:ee.a.btn},o.a.createElement(P,{type:"submit",btnName:"Login",disabled:e.isLoading,btnType:"green"}),o.a.createElement(P,{btnName:"Reset",onClick:function(){return t.resetForm()}}))),e.error&&o.a.createElement("div",{className:ee.a.infoTextRed},e.error),e.isLoading&&o.a.createElement("div",{className:ee.a.loading},"...Loading"))})),se=function(){var e=Object(L.b)(),t=Object(L.c)((function(e){return e.login.isLoggedSuccess})),r=Object(L.c)((function(e){return e.login.isLoading})),a=Object(L.c)((function(e){return e.login.error})),s=Object(n.useCallback)((function(t,r,a){e(function(e,t,r){return function(a){a(B(!0)),U({email:e,password:t,rememberMe:r}).then((function(e){200===e.status&&(a(M(Object(y.a)({},e.data))),a(W(!0)),a(B(!1)))})).catch((function(e){a(B(!1));var t=e.response?e.response.data.error:e.message+", more details in the console";a(X(t)),setTimeout(a,5e3,X(""))}))}}(t,r,a))}),[]);return t?o.a.createElement(S.a,{to:"/profile"}):o.a.createElement(oe,{isLoading:r,isLoggedSuccess:t,error:a,handleOnSubmit:s})},ie=r(13),le=r.n(ie),ce=o.a.memo((function(e){var t=Object(ne.a)({initialValues:{email:"",password:"",password2:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",(!e.password||e.password.length<7)&&(t.password="Must be 7 or more characters"),e.password!==e.password2&&(t.password2="Passwords does not match"),t},onSubmit:function(t){e.onSubmit({email:t.email,password:t.password})}});return o.a.createElement("div",{className:le.a.register},o.a.createElement("div",{className:le.a.register__container},o.a.createElement("form",{className:le.a.register__form,onSubmit:t.handleSubmit},o.a.createElement("div",{className:le.a.register__title},o.a.createElement("h3",null,"Registration")),o.a.createElement("div",{className:le.a.register__inputs},o.a.createElement(ae,Object.assign({label:"Email",errorCondition:!!t.errors.email&&t.touched.email,placeholder:"email",errorText:t.errors.email},t.getFieldProps("email"))),o.a.createElement(ae,Object.assign({label:"Password",errorCondition:!!t.errors.password&&t.touched.password,type:"password",placeholder:"password",errorText:t.errors.password},t.getFieldProps("password"))),o.a.createElement(ae,Object.assign({label:"Repeat password",errorCondition:!!t.errors.password2&&t.touched.password2,type:"password",errorText:t.errors.password2,placeholder:"confirm password"},t.getFieldProps("password2")))),o.a.createElement("div",{className:le.a.register__buttons},o.a.createElement(P,{btnName:"Join",btnType:"green",type:"submit",disabled:!t.isValid||"loading"===e.status}),o.a.createElement(P,{btnName:"Reset",type:"reset",onClick:function(){return t.resetForm()}})),e.error&&o.a.createElement("div",{className:le.a.register__error},e.error),"loading"===e.status&&o.a.createElement("div",{className:le.a.register__loading},"...Loading"))))}));!function(e){e.SET_ERROR="SET_ERROR",e.SET_STATUS="SET_STATUS"}($||($={}));var ue={error:"",status:"idle"},de=function(e){return{type:$.SET_ERROR,payload:{error:e}}},me=function(e){return{type:$.SET_STATUS,payload:{status:e}}},pe=function(){var e=Object(L.b)(),t=Object(L.c)((function(e){return e.register.error})),r=Object(L.c)((function(e){return e.register.status})),a=Object(n.useCallback)((function(t){var r;e((r=t,function(){var e=Object(A.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(me("loading")),t(de("")),e.prev=2,e.next=5,V(r);case 5:e.sent,t(me("succeeded")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),t(de(e.t0.response?e.t0.response.data.error:"unknown error")),t(me("failed")),setTimeout(t,5e3,de(""));case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[]);return"succeeded"===r?o.a.createElement(S.a,{to:"/login"}):o.a.createElement(ce,{onSubmit:a,error:t,status:r})},_e=r(22),Ee=r.n(_e),fe=o.a.memo((function(e){var t=Object(ne.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Field is required!",t},onSubmit:function(t){e.handleOnSubmit(t.email)}});return o.a.createElement("div",{className:Ee.a.restore},o.a.createElement("form",{onSubmit:t.handleSubmit},o.a.createElement("h3",null,"Restore password page"),o.a.createElement(ae,Object.assign({label:"Email",placeholder:"Please, put your email",errorCondition:!!t.errors.email&&t.touched.email,errorText:t.errors.email},t.getFieldProps("email"))),o.a.createElement("div",{className:Ee.a.btn},o.a.createElement(P,{type:"submit",btnName:"Send email",disabled:e.isLoading,btnType:"green"}),o.a.createElement(P,{btnName:"Reset",onClick:function(){return t.resetForm()}})),o.a.createElement(p,{path:"/login",title:"Login"})),e.textAfterRequest&&o.a.createElement("div",{className:e.isSentSuccess?Ee.a.infoTextGreen:Ee.a.infoTextRed},e.textAfterRequest),e.isLoading&&o.a.createElement("div",{className:Ee.a.loading},"...Loading"))})),ge={isSentSuccess:!1,textAfterRequest:"",isLoading:!1},be=function(e){return{type:"restore/SET-VALUE-IS-SENT-SUCCESS",value:e}},we=function(e){return{type:"restore/SET-TEXT-AFTER-REQUEST",textAfterRequest:e}},Se=function(e){return{type:"restore/SET-VALUE-IS-LOADING",isLoading:e}},he=function(){var e=Object(L.b)(),t=Object(L.c)((function(e){return e.restorePassword.textAfterRequest})),r=Object(L.c)((function(e){return e.restorePassword.isSentSuccess})),a=Object(L.c)((function(e){return e.restorePassword.isLoading})),s=Object(n.useCallback)((function(t){e(function(e){return function(t){t(Se(!0)),G({email:e,from:"admin",message:'<div style="background-color: lime; padding: 15px">\n                    password recovery link: \n                    <a href="https://osbelkz.github.io/cards#/newPassword/$token$"> \n                    link</a>\n                </div>'}).then((function(e){e.data.success&&(t(be(!0)),t(we(e.data.info)),t(Se(!1)))})).catch((function(e){t(we(e.response.data.error)),t(Se(!1)),setTimeout(t,5e3,we(""))}))}}(t))}),[]);return o.a.createElement(fe,{textAfterRequest:t,isSentSuccess:r,handleOnSubmit:s,isLoading:a})},ve=r(23),Te=r.n(ve),Oe=o.a.memo((function(e){console.log(e.isSetNewPassword,e.isOk);var t=Object(S.g)().token,r=Object(ne.a)({initialValues:{password1:"",password2:""},validate:function(e){var t={};return e.password1?e.password1.length<8&&(t.password1="Too short password, min 8 symbols"):t.password1="Field is required!",e.password2?e.password2.length<8?t.password2="Too short password, min 8 symbols":e.password1!==e.password2&&(t.password2="Both fields must be equal!"):t.password2="Field is required!",t},onSubmit:function(r){e.handleOnSubmit(r.password1,t)}});return o.a.createElement("div",{className:Te.a.newPassword},o.a.createElement("form",{onSubmit:r.handleSubmit},o.a.createElement("h3",null,"New password page"),o.a.createElement(ae,Object.assign({label:"Password",placeholder:"Please, put new password",errorCondition:!!r.errors.password1&&r.touched.password1,errorText:r.errors.password1},r.getFieldProps("password1"))),o.a.createElement(ae,Object.assign({label:"Password",placeholder:"Put new password again",errorCondition:!!r.errors.password2&&r.touched.password2,errorText:r.errors.password2},r.getFieldProps("password2"))),o.a.createElement("div",{className:Te.a.btn},o.a.createElement(P,{type:"submit",btnName:"Set new password",disabled:e.isLoading,btnType:"green"}),o.a.createElement(P,{btnName:"Reset",onClick:function(){return r.resetForm()}})),o.a.createElement(p,{path:"/login",title:"Login"})),!e.isSetNewPassword&&e.error?o.a.createElement("div",{className:Te.a.infoTextRed},e.error):"",e.isSetNewPassword&&e.isOk?o.a.createElement("div",{className:Te.a.infoTextGreen},e.isOk):"",e.isLoading&&o.a.createElement("div",{className:Te.a.loading},"...Loading"))})),Re={isSetNewPassword:!1,error:"",isOk:"",isLoading:!1},Pe=function(e){return{type:"newPassword/SET-VALUE-IS-SET-NEW-PASSWORD",value:e}},Ne=function(e){return{type:"newPassword/SET-ERROR-TEXT",error:e}},Le=function(e){return{type:"newPassword/SET-VALUE-IS-OK",text:e}},je=function(e){return{type:"restore/SET-VALUE-IS-LOADING",isLoading:e}},xe=function(){var e=Object(L.b)(),t=Object(L.c)((function(e){return e.newPassword.isSetNewPassword})),r=Object(L.c)((function(e){return e.newPassword.error})),a=Object(L.c)((function(e){return e.newPassword.isOk})),s=Object(L.c)((function(e){return e.newPassword.isLoading})),i=Object(n.useCallback)((function(t,r){e(function(e,t){return function(r){r(je(!0)),F({password:e,resetPasswordToken:t}).then((function(e){200===e.status&&(r(Pe(!0)),r(Le(e.data.info)),r(je(!1)))})).catch((function(e){r(Ne(e.response.data.error)),r(je(!1)),setTimeout(r,5e3,Ne(""))}))}}(t,r))}),[]);return t?o.a.createElement(S.a,{to:"/login"}):o.a.createElement(Oe,{isSetNewPassword:t,error:r,handleOnSubmit:i,isOk:a,isLoading:s})},Ae=function(){return o.a.createElement(S.d,null,o.a.createElement(S.b,{path:"/profile",render:function(){return o.a.createElement(H,null)}}),o.a.createElement(S.b,{path:"/login",render:function(){return o.a.createElement(se,null)}}),o.a.createElement(S.b,{path:"/register",render:function(){return o.a.createElement(pe,null)}}),o.a.createElement(S.b,{path:"/restore",render:function(){return o.a.createElement(he,null)}}),o.a.createElement(S.b,{path:"/newPassword/:token",render:function(){return o.a.createElement(xe,null)}}))},ye=function(){return o.a.createElement("div",{className:w.a.main},o.a.createElement(g,null),o.a.createElement(Ae,null))},ke=function(){Object(L.b)();return o.a.createElement("div",{className:"App"},o.a.createElement(ye,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=r(18),Ce=r(54),Ue=Object(Ie.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-VALUE-IS-LOGGED-SUCCESS":return Object(y.a)({},e,{isLoggedSuccess:t.isLoggedSuccess});case"login/SET-VALUE-IS-LOADING":return Object(y.a)({},e,{isLoading:t.isLoading});case"login/SET-ERROR-TEXT":return Object(y.a)({},e,{error:t.error});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $.SET_ERROR:case $.SET_STATUS:return Object(y.a)({},e,{},t.payload);default:return e}},restorePassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"restore/SET-VALUE-IS-SENT-SUCCESS":return Object(y.a)({},e,{isSentSuccess:t.value});case"restore/SET-TEXT-AFTER-REQUEST":return Object(y.a)({},e,{textAfterRequest:t.textAfterRequest});case"restore/SET-VALUE-IS-LOADING":return Object(y.a)({},e,{isLoading:t.isLoading});default:return e}},newPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"newPassword/SET-VALUE-IS-SET-NEW-PASSWORD":return Object(y.a)({},e,{isSetNewPassword:t.value});case"newPassword/SET-ERROR-TEXT":return Object(y.a)({},e,{error:t.error});case"newPassword/SET-VALUE-IS-OK":return Object(y.a)({},e,{isOk:t.text});case"restore/SET-VALUE-IS-LOADING":return Object(y.a)({},e,{isLoading:t.isLoading});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_USER:return Object(y.a)({},e,{},t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.SET_APP_ERROR:case q.SET_INIT_APP:return Object(y.a)({},e,{},t.payload);default:return e}}}),De=Object(Ie.d)(Ue,Object(Ie.a)(Ce.a));i.a.render(o.a.createElement(u.a,null,o.a.createElement(L.a,{store:De},o.a.createElement(o.a.StrictMode,null,o.a.createElement(ke,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.06fb6b01.chunk.js.map